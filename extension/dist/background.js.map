{"version":3,"file":"background.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://smooth-read/./src/background.js"],"sourcesContent":["console.info(\n  \"/home/corbin/Development/smooth-read/extension/src/background.js\",\n);\n\nfunction sendHttpRequest(method, url, dat, callback) {\n  console.log(\"send:\", method, url, dat);\n  fetch(url, {\n    method: method,\n    body: JSON.stringify(dat),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  })\n    .then((response) => response.json())\n    .then((response) => {\n      // console.log(\"server resp=\", response);\n      callback(response);\n      return response;\n    })\n    .catch((error) => {\n      console.error(error, \"send failed\");\n    });\n}\n\n// receive messages from background\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  console.log(\"onMessage:\", message);\n  switch (message.action) {\n    case \"parse_text_nodes\":\n      sendHttpRequest(\n        \"POST\",\n        \"http://127.0.0.1:4545/webpage\",\n        message.data,\n        sendResponse,\n      );\n      break;\n    case \"mark_word_as_known\":\n      sendHttpRequest(\n        \"POST\",\n        \"http://127.0.0.1:4545/vocabulary\",\n        message.data,\n        sendResponse,\n      );\n      break;\n    default:\n      console.error(\"unsupported action:\", message.action);\n  }\n  return true;\n});\n"],"names":[],"sourceRoot":""}